<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[iOS-Weexæºç è§£æž]]></title>
      <url>%2F2017%2F03%2F14%2FWeex_3%2F</url>
      <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ä»¥åŠé‡è¦æ€§ï¼Œè¿™ä¸€ç¯‡å°†æ­£å¼å¼€å§‹Weexæºç çš„è§£æžï¼Œç‰ˆæœ¬æ˜¯0.10.0 å…¥å£å­¦ä¹ ä¸€ä¸ªå¼€æºåº“ï¼Œæœ€å¥½æ˜¯çŸ¥å…¶æ€æƒ³ï¼Œæ‰¾å…¶å…¥å£ï¼Œå­¦å…¶æ ¸å¿ƒã€‚å¤§è‡´æ€æƒ³åœ¨ç¬¬ä¸€ç¯‡ï¼Œæ ¸å¿ƒæ–‡ä»¶å¤¹çš„åˆ†ç±»åœ¨ç¬¬äºŒç¯‡ï¼Œè¿™ä¸€ç¯‡å°±ä»Žå…¶å…¥å£æ–‡ä»¶å¼€å§‹å­¦ä¹ ã€‚ WeexDemoçš„å…¥å£æ˜¯[WXSDKEngine initSDKEnvironment];ã€‚è¿™ä¸ªMethodçš„ä¸»è¦ä»£ç ï¼Œå¦‚ä¸‹ï¼š 123NSString *filePath = [[NSBundle bundleForClass:self] pathForResource:@&quot;main&quot; ofType:@&quot;js&quot;];NSString *script = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];[WXSDKEngine initSDKEnvironment:script]; é¦–å…ˆï¼Œè¯»å–ä¸€ä¸ªå«åšmain.jsçš„æ–‡ä»¶å†…å®¹ï¼Œç„¶åŽå°†å…¶å†…å®¹ä½œä¸º[WXSDKEngine initSDKEnvironment:script]åˆå§‹åŒ–çš„å‚æ•°ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä¸ªmethodçš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š 123456if (!script || script.length &lt;= 0) &#123; WX_MONITOR_FAIL(WXMTJSFramework, WX_ERR_JSFRAMEWORK_LOAD, @&quot;framework loading is failure!&quot;); return;&#125;[self registerDefaults];[[WXSDKManager bridgeMgr] executeJsFramework:script]; æ³¨å†Œå’Œæ‰§è¡ŒRegisteré¦–å…ˆï¼Œæ˜¯å¯¹ä¼ é€’è¿›æ¥çš„jsä»£ç åšåˆ¤æ–­ï¼Œå…¶æ¬¡è°ƒç”¨äº†ä¸€ä¸ªregisterDefaultsçš„methodï¼Œä»£ç å¦‚ä¸‹ï¼š 123456static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123; [self _registerDefaultComponents]; [self _registerDefaultModules]; [self _registerDefaultHandlers];&#125;); Register Componetè¿™ä¸ªmethodä½¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œå¯¹Weexå®šä¹‰çš„Componentã€Moduleã€Handlerè¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œä»£ç å¤ªé•¿ï¼Œæˆ‘å°±ä¸è´´äº†ã€‚æ³¨å†ŒComponentï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526+ (void)registerComponent:(NSString *)name withClass:(Class)clazz&#123; [self registerComponent:name withClass:clazz withProperties: @&#123;@&quot;append&quot;:@&quot;tree&quot;&#125;];&#125;+ (void)registerComponent:(NSString *)name withClass:(Class)clazz withProperties:(NSDictionary *)properties&#123; if (!name || !clazz) &#123; return; &#125; WXAssert(name &amp;&amp; clazz, @&quot;Fail to register the component, please check if the parameters are correct ï¼&quot;); [WXComponentFactory registerComponent:name withClass:clazz withPros:properties]; NSMutableDictionary *dict = [WXComponentFactory componentMethodMapsWithName:name]; dict[@&quot;type&quot;] = name; if (properties) &#123; NSMutableDictionary *props = [properties mutableCopy]; if ([dict[@&quot;methods&quot;] count]) &#123; [props addEntriesFromDictionary:dict]; &#125; [[WXSDKManager bridgeMgr] registerComponents:@[props]]; &#125; else &#123; [[WXSDKManager bridgeMgr] registerComponents:@[dict]]; &#125;&#125; ç¬¬ä¸€ä¸ªmethodä¸­æ¯”è¾ƒè®©äººè¿·æƒ‘çš„ä¹Ÿå°±æ˜¯Propertiesä¸­çš„å‚æ•°äº†ï¼Œè¿™ä¸ªå…¶å®žæ˜¯vueçš„æ¸²æŸ“æ¨¡å¼ã€‚@&quot;append&quot;:@&quot;tree&quot;ä»£è¡¨æ˜¯æ•´ä¸ªvueç»“ç‚¹åŒ…æ‹¬å­ç»“ç‚¹ç”Ÿæˆå®Œä¹‹åŽæ‰ä¼šä¸€æ¬¡æ€§æ¸²æŸ“åˆ°å±å¹•ï¼Œ@&quot;append&quot;:@&quot;node&quot;ä»£è¡¨æ˜¯å…ˆæ¸²æŸ“è‡ªèº«ç„¶åŽå†æ¸²æŸ“å­èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªmethodä¸­å…ˆå¯¹nameå’Œclassè¿›è¡Œåˆ¤ç©ºï¼Œå…¶æ¬¡ä½¿ç”¨WXComponentFactoryè¿›è¡Œæ³¨å†Œï¼Œåœ¨è¿™ä¹‹å‰å…ˆè®²å‡ ä¸ªç›¸å…³ç±»çš„åŠŸèƒ½ï¼Œå…å¾—è¿·ç³Šã€‚ WXInvocationConfigï¼šæŠ½è±¡å•ä¾‹ç±»ï¼Œä¸ºä»€ä¹ˆç”¨å•ä¾‹(æ‡µé€¼è„¸)ï¼Œä½¿ç”¨æ—¶éœ€è¦å­ç±»ç»§æ‰¿ WXComponentConfig: ç»§æ‰¿WXInvocationConfigç±»ï¼Œå­˜å‚¨æ¯ä¸ªComponentçš„methodã€nameã€classname WXComponentFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸å­˜å‚¨WXComponentConfigå¯¹è±¡ï¼Œé€šè¿‡æ¯ä¸ªWXComponentConfigå¯¹è±¡æ“ä½œæ¯ä¸ªComponentçš„methodã€nameã€classnameã€‚ é¦–å…ˆé€šè¿‡WXComponentFactoryè°ƒç”¨- (void)registerComponent:(NSString *)name withClass:(Class)clazz withPros:(NSDictionary *)prosæ–¹æ³•æ³¨å†Œã€‚ä½¿ç”¨Assertåˆ¤æ–­ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªWXComponentConfigå¯¹è±¡ï¼Œå…ˆä»Žå­—å…¸ä¸­å–ï¼Œä¸è®ºæ˜¯å¦å­˜åœ¨éƒ½é‡æ–°åˆå§‹åŒ–ï¼Œå¹¶å°†å…¶è¦†ç›–ï¼Œè°ƒç”¨[config registerMethods];å°†ç±»ä¸­çš„methodé€šè¿‡runtimeå­˜å‚¨åœ¨WXComponentConfigä¸­ï¼Œå­˜å–æ—¶åŠ é”ä¿è¯å®‰å…¨ã€‚å…¶æ¬¡è°ƒç”¨- (NSMutableDictionary *)_componentMethodMapsWithName:(NSString *)nameæ–¹æ³•èŽ·å–æŸä¸ªcomponentæ‰€æœ‰çš„methodï¼ŒåŒæ ·æ˜¯åŠ é”è¯»å–ã€‚æ ¹æ®æœ‰æ²¡æœ‰propertiesä¼ é€’ä¸åŒå‚æ•°ï¼Œå¦‚æžœç±»ä¸­æœ‰å¯¼å‡ºç»™weexç”¨çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸€å®šä¼šä¼ é€’methodå’Œnameè¿‡åŽ»ã€‚æœ€åŽè°ƒç”¨JSæ–¹æ³•registerComponentsï¼Œæˆ‘åœ¨vue.jsçš„æºç ä¸­æ˜¯æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•äº†çš„ã€‚å¯¹äºŽå…·ä½“è°ƒç”¨JSçš„è¿‡ç¨‹ï¼Œä¼šåœ¨ExecuteJsæ¨¡å—è®²è§£ã€‚ 1234567891011121314export function registerComponents (newComponents) &#123; if (Array.isArray(newComponents)) &#123; newComponents.forEach(component =&gt; &#123; if (!component) &#123; return &#125; if (typeof component === &apos;string&apos;) &#123; components[component] = true &#125; else if (typeof component === &apos;object&apos; &amp;&amp; typeof component.type === &apos;string&apos;) &#123; components[component.type] = component &#125; &#125;) &#125;&#125; Register Moduleæ³¨å†ŒModuleï¼Œä»£ç å¦‚ä¸‹ï¼š 1234WXAssert(name &amp;&amp; clazz, @&quot;Fail to register the module, please check if the parameters are correct ï¼&quot;); NSString *moduleName = [WXModuleFactory registerModule:name withClass:clazz];NSDictionary *dict = [WXModuleFactory moduleMethodMapsWithName:moduleName];[[WXSDKManager bridgeMgr] registerModules:dict]; å…ˆä»‹ç»å‡ ä¸ªç±»ï¼š WXModuleConfigï¼šç»§æ‰¿WXInvocationConfigç±»ï¼Œå­˜å‚¨æ¯ä¸ªComponentçš„methodã€name WXModuleFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸æ“ä½œWXModuleConfigå¯¹è±¡ æŸ¥é˜…ä¸‹è¿™ä¸¤ä¸ªç±»çš„ä»£ç ä¼šå‘çŽ°è·ŸComponentç»“æž„ç±»ä¼¼ï¼Œè·Ÿæ³¨å†ŒComponentæµç¨‹ä¹Ÿä¸€æ ·ï¼Œæ„Ÿè§‰æ²¡å¿…è¦åºŸè¯ä¸€éäº†ï¼Œæœ€åŽè°ƒç”¨JSæ–¹æ³•registerModulesã€‚ Register Handleræ³¨å†ŒHandlerï¼Œä»£ç å¦‚ä¸‹ï¼š 123WXAssert(handler &amp;&amp; protocol, @&quot;Fail to register the handler, please check if the parameters are correct ï¼&quot;); [WXHandlerFactory registerHandler:handler withProtocol:protocol]; ç…§ä¾‹ä»‹ç»å‡ ä¸ªç±»ï¼š WXHandlerFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸å­˜å‚¨åè®®å¯¹è±¡ï¼Œå°†åè®®çš„å­—ç¬¦ä¸²ä½œä¸ºkeyå­˜å‚¨ æ³¨å†ŒHandlerï¼Œè¿™ä¸ªä¸éœ€è¦ä¼ ç»™weexï¼Œå› ä¸ºå°±æ˜¯æˆ‘ä»¬Nativeç«¯è¿›è¡Œè°ƒç”¨ã€‚æ‰€ä»¥åªéœ€è¦ä½¿ç”¨WXHandlerFactoryæ“ä½œå°±è¡Œäº†ã€‚ ExecuteJsæœ€åŽè°ƒç”¨[[WXSDKManager bridgeMgr] executeJsFramework:script];æ‰§è¡Œjsä»£ç ã€‚è¿™ä¸€å—çš„çŸ¥è¯†ç‚¹æ˜¯Weexä¸Žjsçš„äº¤äº’ï¼Œæ‰€ä»¥éœ€è¦äº†è§£ä¸‹é¢å‡ ä¸ªç±»ï¼Œå¹¶ä¸”å¯¹OCä¸­çš„JavaScriptCoreæ¡†æž¶æœ‰æ‰€äº†è§£ã€‚ é¦–å…ˆä»‹ç»å‡ ä¸ªç±»ï¼š WXSDKInstanceï¼šæ™®é€šç±»ï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªç±»ä¼¼äºŽControllerçš„ç±»ï¼Œå…·æœ‰éžå¸¸å¤šçš„åŠŸèƒ½ï¼Œç›®å‰ä¸éœ€è¦äº†è§£å…·ä½“åŠŸèƒ½ WXSDKManagerï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡ä¸€ä¸ªå­—å…¸å­˜å‚¨æ‰€æœ‰WXSDKInstanceå®žä¾‹ï¼Œkeyæ˜¯ä¸€ä¸ªå”¯ä¸€å€¼ï¼›ä¸€ä¸ªWXBridgeManagerå®žä¾‹ WXBridgeManagerï¼šå•ä¾‹ç±»ï¼Œæ³¨å†Œï¼Œæ¸²æŸ“åŠŸèƒ½éƒ½é€šè¿‡è°ƒç”¨WXBridgeContextå¯¹è±¡åŽ»è·ŸJSäº¤äº’ WXBridgeContextï¼šåŠŸèƒ½å…¶å®žä¸å¤šï¼Œrenderï¼Œregist componentï¼Œregist moduleï¼ŒexecuteJsã€‚å°±æ˜¯å¤„ç†äº†éœ€è¦è°ƒç”¨jsçš„é€»è¾‘ã€‚ WXJSCoreBridge: è¿™ä¸ªç±»æ‰æ˜¯çœŸæ­£çš„å¤„ç†JSè°ƒç”¨çš„ç±»ã€‚å®ƒå®žçŽ°äº†WXBridgeProtocolåè®®ï¼Œå¯¹JavaScriptCoreè¿›è¡Œäº†å°è£…ï¼Œä½¿WXBridgeContextè°ƒç”¨ çŽ°åœ¨å¯ä»¥ä»Žé‚£å¥ä»£ç å¼€å§‹è®²äº†ï¼Œ[WXSDKManager bridgeMgr]è¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œä»–åœ¨JSçº¿ç¨‹è°ƒç”¨executeJsFrameworkï¼Œä»£ç å¦‚ä¸‹ï¼š 12345if (!script) return;__weak typeof(self) weakSelf = self;WXPerformBlockOnBridgeThread(^()&#123; [weakSelf.bridgeCtx executeJsFramework:script];&#125;); å…ˆæ˜¯åˆ¤ç©ºï¼Œå…¶æ¬¡weakSelfé˜²æ­¢å¾ªçŽ¯å¼•ç”¨ï¼Œç„¶åŽåœ¨ä¸€ä¸ªå«åš&quot;com.taobao.weex.bridge&quot;çš„çº¿ç¨‹è°ƒç”¨executeJsFrameworkæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233WXAssertBridgeThread();WXAssertParam(script); WX_MONITOR_PERF_START(WXPTFrameworkExecute); [self.jsBridge executeJSFramework:script]; WX_MONITOR_PERF_END(WXPTFrameworkExecute); if ([self.jsBridge exception]) &#123; NSString *message = [NSString stringWithFormat:@&quot;JSFramework executes error: %@&quot;, [self.jsBridge exception]]; WX_MONITOR_FAIL(WXMTJSFramework, WX_ERR_JSFRAMEWORK_EXECUTE, message);&#125; else &#123; WX_MONITOR_SUCCESS(WXMTJSFramework); //the JSFramework has been load successfully. self.frameworkLoadFinished = YES; [self executeAllJsService]; JSValue *frameworkVersion = [self.jsBridge callJSMethod:@&quot;getJSFMVersion&quot; args:nil]; if (frameworkVersion &amp;&amp; [frameworkVersion isString]) &#123; [WXAppConfiguration setJSFrameworkVersion:[frameworkVersion toString]]; &#125; //execute methods which has been stored in methodQueue temporarily. for (NSDictionary *method in _methodQueue) &#123; [self callJSMethod:method[@&quot;method&quot;] args:method[@&quot;args&quot;]]; &#125; [_methodQueue removeAllObjects]; WX_MONITOR_PERF_END(WXPTInitalize);&#125;; é¦–å…ˆæ–­è¨€å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯&quot;com.taobao.weex.bridge&quot;çº¿ç¨‹ï¼Œå…¶æ¬¡æ–­è¨€jsä»£ç ï¼Œä½¿ç”¨WXBridgeProtocolåè®®å¯¹è±¡æ‰§è¡Œjsä»£ç ï¼ŒæŽ¥ç€åˆ¤æ–­jsæ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œæœ‰å¼‚å¸¸è¾“å‡ºï¼Œæ— å¼‚å¸¸ï¼Œæ ‡è®°è¯»å–ç»“æŸï¼Œæ‰§è¡Œæ‰€æœ‰çš„jsServiceï¼ŒèŽ·å–JSFMVersionï¼Œæ‰§è¡ŒmethodQueueä¸­æ‰€æœ‰çš„methodï¼Œæ¸…é™¤ä¿¡æ¯ï¼Œç»“æŸã€‚ JavaScriptCoreJavaScriptCoreç®€ä»‹ä¸Šé¢åªæ˜¯ç†æ¸…äº†é€»è¾‘ï¼Œå¦‚æžœå¯¹JavaScriptCoreä¸äº†è§£çš„äººå¯èƒ½çœ‹æºç æ—¶æœ‰äº›æ‡µé€¼ï¼Œä¸‹é¢æˆ‘è®²è§£ä¸€äº›JavaScriptCoreçš„åŸºæœ¬æ¦‚å¿µä»¥åŠç”¨æ³•ã€‚ JSVirtualMachineï¼šä¸ºJavaScriptæä¾›è¿è¡Œèµ„æº JSContextï¼šä¸ºJavaScriptæä¾›è¿è¡ŒçŽ¯å¢ƒ JSValueï¼šå¯ä»¥å°†JavaScriptå˜é‡è½¬æ¢ä¸ºOCå˜é‡ï¼Œä¹Ÿå¯ä»¥å°†OCå˜é‡è½¬æ¢ä¸ºJavaScriptå˜é‡ JavaScriptCoreç¤ºä¾‹è¿™äº›æ˜¯Weexä½¿ç”¨çš„JavaScriptCoreæ¡†æž¶ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå…¶å®žè¿˜æœ‰åˆ«çš„ã€‚å…ˆæ¥ä¸€æ®µä»£ç å¥½äº†ï¼š ç®€å•ä½¿ç”¨12345JSContext *context = [[JSContext alloc] init];JSValue *value = [context evaluateScript:@&quot;var sum = 2 + 3; sum&quot;];NSLog(@&quot;%@&quot;, value); è¾“å‡º5context[@&quot;sum&quot;] = @&quot;40&quot;;NSLog(@&quot;%@&quot;, context[@&quot;sum&quot;]); è¾“å‡º40 é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªJSContextå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨JSVirtualMachineå¯¹è±¡åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥åˆå§‹åŒ–ï¼Œç›´æŽ¥åˆå§‹åŒ–ç³»ç»Ÿä»ä¼šåœ¨å†…éƒ¨ç»™ä½ åˆå§‹åŒ–ä¸€ä¸ªJSVirtualMachineå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªjsè¿è¡Œçš„èµ„æºï¼Œä¸å¯æˆ–ç¼ºã€‚ ç¬¬äºŒå¥ä»£ç çš„æ„æ€æ˜¯å…ˆä½¿ç”¨contextå¯¹è±¡è¿è¡Œjsä»£ç ï¼Œå®šä¹‰ä¸€ä¸ªå«åšsumçš„å˜é‡ï¼Œå¹¶èµ‹å€¼2+3ï¼Œç„¶åŽå°†sumèµ‹å€¼ç»™valueã€‚ ç¬¬ä¸‰å¥ä»£ç è¾“å‡ºvalueçš„å€¼æ˜¯5ï¼Œç¬¬å››å¥ä»£ç ç»™sumèµ‹å€¼40ï¼Œç¬¬äº”å¥è¾“å‡ºsumå€¼ä¸º40ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºJSContextæ˜¯jsçš„çŽ¯å¢ƒï¼Œè€Œä¸”åœ¨jsä¸­ï¼Œæ‰€æœ‰å…¨å±€å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡çš„å±žæ€§ã€‚æ‰€ä»¥åœ¨ç¬¬å››å¥ï¼Œä½ å¯ä»¥ç›´æŽ¥ä»Žcontextä¸­å–å‡ºsumè¿™ä¸ªå˜é‡ï¼Œå¹¶èµ‹å€¼ã€‚ å¼‚å¸¸å¤„ç†1234_jsContext.exceptionHandler = ^(JSContext *context, JSValue *exception) &#123; context.exception = exception; NSString *message = [NSString stringWithFormat:@&quot;[%@:%@:%@] %@\n%@&quot;, exception[@&quot;sourceURL&quot;], exception[@&quot;line&quot;], exception[@&quot;column&quot;], exception, [exception[@&quot;stack&quot;] toObject]];&#125;; å¦ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹å°±æ˜¯è¿™é‡Œï¼ŒJavaScriptCoreä¼šåœ¨exceptionHandlerä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ºäº†æˆ‘ä»¬èƒ½åœ¨è¿™ä¸ªæ—¶å€™åšç‚¹ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬èµ‹å€¼ç»™ä»–ä¸€ä¸ªblcokã€‚å¹¶ä¸”å¦‚æžœä½ è¦åœ¨blockä¸­ä½¿ç”¨contextå¯¹è±¡ï¼Œè¦ä¹ˆå°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’è¿›blockï¼Œè¦ä¹ˆä½¿ç”¨[JSContext currentContext]èŽ·å–å½“å‰çš„contextã€‚å¦‚æžœç›´æŽ¥å¼•ç”¨å¤–éƒ¨çš„contextä¼šé€ æˆå¾ªçŽ¯é¥®ç”¨ã€‚ invokeMethod1234JSContext *context = [[JSContext alloc] init];[context evaluateScript:@&quot;function add(a, b) &#123; return a + b; &#125;&quot;]; JSValue *sum = [[context globalObject] invokeMethod:@&quot;add&quot; withArguments:@[@(3), @(4)]];NSLog(@&quot;%@&quot;, sum); è¾“å‡º7 åˆå§‹åŒ–ä¸€ä¸ªcontextï¼Œå°†ä¸€ä¸ªåä¸ºaddçš„methodåŠ å…¥åˆ°contextä¸­ï¼Œä½¿ç”¨jså…¨å±€å˜é‡è°ƒç”¨addæ–¹æ³•ï¼Œå¹¶ä¼ å…¥å‚æ•°3ï¼Œ4ï¼Œè¾“å‡ºç»“æžœä¸º7ã€‚ æ€»ç»“ä¸Šé¢è®²äº†Weexæ³¨å†Œçš„åŸºæœ¬é€»è¾‘å’ŒJavaScriptCoreæ¡†æž¶çš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œæˆ‘æƒ³åº”è¯¥å¯¹ç†è§£Weexæ¡†æž¶çš„è¿ä½œåŽŸç†æœ‰å¸®åŠ©çš„ã€‚å…¶å®žå‰©ä¸‹çš„æºç è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å‘jsç«¯å‘é€æ¶ˆæ¯ç­‰ï¼Œä½†å…¶å®žè´¨é€ƒä¸è¿‡ä¸Šé¢çš„æµç¨‹ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºä¹Ÿæ²¡æœ‰å¾€ä¸‹å†™çš„å¿…è¦äº†ã€‚æœ€åŽï¼Œä¸ºå¤§å®¶æ•´ç†ä¸‹ç±»çš„è°ƒç”¨é¡ºåºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOS-Weexæºç æ–‡ä»¶å¤¹çš„è§£é‡Š]]></title>
      <url>%2F2017%2F03%2F14%2FWeex_2%2F</url>
      <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexåœ¨iOSç«¯çš„ç”¨æ³•ï¼Œè¿™ä¸€ç¯‡ä»‹ç»ä¸‹Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ï¼Œç‰ˆæœ¬æ˜¯0.10.0 Weexæ–‡ä»¶å¤¹*æœ€ä¸é‡è¦çš„æ–‡ä»¶å¤¹ï¼šControllerã€Debugã€Handler *ä¸é‡è¦çš„æ–‡ä»¶å¤¹ï¼šLoaderã€Monitorã€Networkã€Utilityã€WebSocket *ç¨å¾®é‡è¦çš„æ–‡ä»¶å¤¹ï¼šComponentã€Moduleã€Protocol *é‡è¦çš„æ–‡ä»¶å¤¹ï¼šDisplayã€Eventsã€Layoutã€View *æœ€é‡è¦çš„æ–‡ä»¶å¤¹ï¼šBridgeã€Engineã€Managerã€Model Controller: ä¸€ä¸ªç»§æ‰¿UIViewControllerçš„ç±»ï¼Œä¸€ä¸ªç»§æ‰¿UINavigationController.ä½ å®Œå…¨ç”¨ä¸åˆ°ï¼Œé…±æ²¹ï¼› Debugï¼šä¸€ä¸ªè°ƒè¯•ç±»ï¼Œé…±æ²¹ï¼› Handlerï¼šä¸¤ä¸ªç±»å®žçŽ°äº†ä¸¤ä¸ªWeexçš„Protocolï¼Œé…±æ²¹ï¼› Loaderï¼šä¸€ä¸ªç±»æ˜¯Networkçš„å›žè°ƒå®žçŽ°ï¼Œä¸€ä¸ªç±»æ˜¯WebSocketçš„å›žè°ƒã€‚ Monitorï¼šä¸€ä¸ªç›‘æµ‹çš„ç±»ï¼Œè¾“å‡ºä¸€äº›ä¿¡æ¯ã€‚ Network:ä¸€ä¸ªå°åž‹çš„ç½‘ç»œè¯·æ±‚åº“ Utilityï¼šä¸€äº›å¸¸ç”¨æ–¹æ³•çš„å°è£… WebSocketï¼šå¯¹SRWebSocketçš„å°è£… Componetï¼šå¯¹å„ç§viewçš„å°è£…ï¼Œå¦‚æžœéœ€è¦æ‰©å±•viewå°±è·Ÿè¿™ä¸ªæœ‰å…³ Moduleï¼šæä¾›å„ç§æ–¹æ³•ç»™Componetä½¿ç”¨ï¼ŒWeexå°è£…çš„éƒ½æ˜¯ç»™Weexå®šä¹‰çš„Componetç”¨ï¼Œä¸€èˆ¬éƒ½æ˜¯è‡ªå®šä¹‰Method Protocolï¼šæä¾›å„ç§åè®®ï¼ŒHandleræ‰€å®žçŽ°çš„åè®®å°±æ˜¯è¿™é‡Œé¢çš„ï¼Œæ„Ÿè§‰weexæä¾›çš„å·²ç»å¤Ÿç”¨äº†ã€‚ Displayï¼šWXComponentçš„å±•ç¤º Eventsï¼šWXComponentçš„äº‹ä»¶ Layoutï¼šWXComponentçš„å¸ƒå±€ Viewï¼šWXComponentçš„View Bridgeï¼šWeexä¸ŽNativeJSä¹‹é—´çš„æ¡¥æŽ¥ Engineï¼šWeexçš„å…¥å£ï¼Œç”¨äºŽåˆå§‹åŒ–Envï¼Œæ³¨å†ŒComponetã€Moduleã€Handlerï¼Œé‡è½½ç­‰ Modelï¼šWXComponentæ˜¯Componetçš„æ ¹ç±»ï¼ŒWXSDKInstanceç±»ä¼¼Nativeçš„Controllerï¼Œæ‹¥æœ‰è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥å•é“¾è¡¨å½¢å¼å­˜å‚¨çš„çˆ¶WXSDKInstanceå®žä¾‹ï¼Œè‡ªèº«çš„viewï¼Œrenderç­‰ã€‚ Managerï¼šWeexä¸­å„ç§ç®¡ç†çš„ç±»]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOS-Book]]></title>
      <url>%2F2017%2F02%2F26%2FReadBook_iOS%2F</url>
      <content type="text"><![CDATA[iOSç›¸å…³ä¹¦ç±â€¦ ã€ŠiOS7åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹åœ¨æœ‹å‹é‚£çœ‹åˆ°çš„ä¸€æœ¬ä¹¦ï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´æŠŠè¿™æœ¬ä¹¦ç¿»äº†ä¸€éï¼Œæ„Ÿè§‰é€‚åˆæœ‰ä¸€äº›ç¼–ç¨‹æ¦‚å¿µçš„äººçœ‹ã€‚å…¶æ¬¡ï¼Œè¿™æœ¬ä¹¦æŸäº›çŸ¥è¯†ç‚¹å¯¹äºŽå½“ä¸‹è¿‡äºŽå¤è€ï¼Œå¦‚14.2æ‰‹åŠ¿äº‹ä»¶ã€11.3.5çš„UIViewAutoresizingç­‰ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šè¿™æœ¬ä¹¦æ˜¯å¦æœ‰æ–°ç‰ˆã€‚æ­¤å¤–ï¼Œå¦‚æžœæœªç”¨åˆ°CoreDataå’ŒAudio/Videoçš„ï¼Œå»ºè®®ç²—ç•¥æŸ¥çœ‹16ã€17ç« ï¼Œè¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹æ¯ä¸ªéƒ½æ˜¯ä¸€ä¸ªé¢†åŸŸï¼Œå½“ç„¶å¦‚æžœå°±æ˜¯å†²ç€è¿™çŸ¥è¯†ç‚¹åŽ»çš„ï¼Œé‚£ä¹Ÿå¯ä»¥å½“æˆåŸºç¡€æ¦‚å¿µçš„äº†è§£åŠä½¿ç”¨ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æœ¬ä¹¦å¯¹äºŽä¿®è¡¥åŸºç¡€çŸ¥è¯†ç©ºç¼ºæˆ–æ˜¯iOSåˆå­¦è€…è¿˜æ˜¯æœ‰ä¸é”™çš„å¸®åŠ©ã€‚ ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹è¿™æœ¬ä¹¦ä½œè€…æ˜¯å”å·§ï¼Œç¬¬ä¸€éƒ¨åˆ†è®²äº†å¾ˆå¤šå·¥å…·ï¼Œå äº†ä¸€åŠä¹¦çš„åŽšåº¦ï¼›ç¬¬äºŒéƒ¨åˆ†è®²äº†å¾ˆå¤šçš„å®žæˆ˜å°çªé—¨ï¼Œç¬¬ä¸‰éƒ¨åˆ†åˆæ­¥è®²äº†ä¸€ä¸‹OCå¯¹è±¡ï¼ŒæŒ‡é’ˆï¼ŒblockåŽŸç†è¿™äº›ã€‚è¿™æœ¬ä¹¦çœŸçš„æ˜¯ä¹¦å¦‚å…¶åï¼Œè¿›é˜¶å¼€å‘ã€‚ã€‚ã€‚å¹¶æ²¡æœ‰è®²è§£å¾ˆå¤šçš„åŽŸç†å±‚æ¬¡çš„ä¸œè¥¿ï¼Œæ›´å¤šçš„å°±æ˜¯ä¸šåŠ¡å±‚æ¬¡çš„ã€‚æ‰€ä»¥æœ‰å¾ˆå¤šäººè¯´å°±æ˜¯æ··çš„ï¼Œä¹Ÿæœ‰äººè¯´å†™çš„OKï¼Œæˆ‘æ„Ÿè§‰ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºå§ã€‚ ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ã€‹è¿™æœ¬ä¹¦æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„ï¼Œåæ­£ä¸çŸ¥é“å«ä»€ä¹ˆï¼Œå“ˆå“ˆå“ˆã€‚è¿™æœ¬ä¹¦ä¹Ÿæœ‰å‡ å¹´äº†ï¼Œä¸»è¦è®²äº†ä¸‰ä¸ªä¸œè¥¿å¼•ç”¨è®¡æ•°ï¼ŒBlockï¼ŒGCDã€‚å¼•ç”¨è®¡æ•°è¿™å—å¼•ç”¨äº†å¾ˆå¤šGNUstepçš„æºç ï¼Œä¸»è¦æ˜¯è‹¹æžœè¿™éƒ¨åˆ†æºç ä¸å¼€æ”¾ï¼Œæ‘Šæ‰‹ï¼›Blockè¿™å—ä¸»è¦çœ‹çš„æ˜¯clang rewrite ä¹‹åŽçš„ä»£ç ï¼›GCDæ˜¯å‚è€ƒçš„è‹¹æžœå¼€æºçš„libdispatchå’ŒXNUå†…æ ¸æºç ï¼Œä½†æ˜¯è¿™å—è®²è§£çš„ä¸æ˜¯éžå¸¸æ·±å…¥ï¼Œåªæ˜¯åˆ—ä¸¾äº†è°ƒç”¨çš„APIã€‚è¿™æœ¬ä¹¦è®²è§£å†…å®¹ç›¸å¯¹æ¥è¯´æ¯”è¾ƒæ·±ï¼Œå¹¶ä¸”ä¸Žä¸šåŠ¡æœ‰å…³çš„ä¸å¤šï¼Œé€‚åˆæƒ³äº†è§£è¿™å‡ ä¸ªçŸ¥è¯†ç‚¹åŽŸç†çš„äººçœ‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOS-Weexçš„ç®€å•ä½¿ç”¨]]></title>
      <url>%2F2017%2F02%2F01%2FWeex_1%2F</url>
      <content type="text"><![CDATA[æœ¬ç¯‡ä¸»è¦è®²è§£ä¸€ä¸‹Weexçš„å¤§æ¦‚åŽŸç†ä»¥åŠç®€å•çš„ä½¿ç”¨ Weex ä¸ŽRNç›¸åŒåŽŸç†ï¼ŒæŸäº›æ–¹é¢ä¼˜äºŽRN jsè¯­æ³•ï¼Œæ¯”Nativeä½“éªŒç¨å·®ï¼Œæ¯”hybrid appä½“éªŒå¥½å¤ªå¤š jsä¸€ç«¯ä»£ç ï¼Œä¸‰ç«¯ä½¿ç”¨ iOS/Androidè„±ç¦»å†™UIçš„å™©æ¢¦ æ–‡æ¡£ä¸å¤Ÿå®Œå–„ WeexåŽŸç† Weexä½¿ç”¨ é¦–å…ˆï¼Œåœ¨AppDelegateä¸­è°ƒç”¨[WXSDKEngine initSDKEnvironment]è¿›è¡Œæ³¨å†Œ 12345- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [WXSDKEngine initSDKEnvironment]; return YES;&#125; å…¶æ¬¡ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„ViewControllerä¸­å®šä¹‰ä¸€ä¸ªWXSDKInstanceå®žä¾‹å’ŒUIä¸ªUIViewå®žä¾‹ 12@property (nonatomic) WXSDKInstance *instance;@property (nonatomic) UIView *weexView; ç´§æŽ¥ç€ï¼Œåˆå§‹åŒ–WXSDKInstanceå®žä¾‹ï¼Œè®¾ç½®å®ƒçš„viewControllerã€frameå±žæ€§ï¼Œå®žçŽ°å®ƒçš„ç”Ÿå‘½å‘¨æœŸ 123456789101112131415161718192021222324252627_instance = [[WXSDKInstance alloc] init];_instance.viewController = self;_instance.frame = [UIScreen mainScreen].bounds; __weak typeof(self) weakSelf = self;_instance.onCreate = ^(UIView *view) &#123; [weakSelf.weexView removeFromSuperview]; weakSelf.weexView = view; [weakSelf.view addSubview:weakSelf.weexView];&#125;; _instance.onFailed = ^(NSError *error) &#123; NSLog(@&quot;failed %@&quot;,error);&#125;; _instance.renderFinish = ^(UIView *view) &#123; NSLog(@&quot;render finish&quot;);&#125;; _instance.onRenderProgress = ^(CGRect renderRect) &#123; NSLog(@&quot;renderProgress&quot;);&#125;; _instance.updateFinish = ^(UIView *view) &#123; NSLog(@&quot;update Finish&quot;);&#125;; æœ€åŽï¼Œä½¿ç”¨WXSDKInstanceå®žä¾‹è°ƒç”¨renderWithURL:æ–¹æ³•å³å¯ã€‚è®°å¾—åœ¨deallocä¸­é‡Šæ”¾WXSDKInstanceå®žä¾‹å“¦ðŸ˜¯ [self.instance renderWithURL:[NSURL URLWithString:renderURL]]; Weexçš„è‡ªå®šä¹‰ Component: Weexç»„ä»¶ï¼Œweexå®˜æ–¹åŸºæœ¬æŠŠåŽŸç”Ÿçš„å®šä¹‰è¿‡äº†ï¼Œæ‰€ä»¥ä½ åŸºæœ¬ä¸éœ€è¦è‡ªå®šä¹‰ã€‚å¦‚æžœéœ€è¦è‡ªå®šä¹‰ï¼Œæ™®é€šç»„ä»¶ç»§æ‰¿WXComponentï¼Œæ»‘åŠ¨ç»„ä»¶ç»§æ‰¿WXScrollerComponent handler: Nativeæä¾›ä¸€ä¸ªåè®®ã€‚weexå®˜æ–¹å®šä¹‰äº†å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå¦‚WXImgLoaderProtocolå›¾ç‰‡ä¸‹è½½ã€‚å¦‚æžœéœ€è¦è‡ªå®šä¹‰ï¼Œæ³¨æ„éœ€éµå®ˆåè®®WXModuleProtocol moduleï¼šjsè°ƒç”¨Native, è¿”å›žå€¼å¯æœ‰å¯æ— ã€‚è¿™ä¸ªåŸºæœ¬ç”¨åˆ°å°±æ˜¯è‡ªå®šä¹‰ï¼Œéµå®ˆåè®®WXModuleProtocolï¼Œéœ€è¦è‡ªå®šä¹‰Methodï¼Œå¦‚æžœéœ€è¦è¿”å›žå€¼ä½¿ç”¨WXModuleCallbackè¿”å›ž æ€»ç»“ï¼šComponentã€handlerã€moduleéƒ½éœ€è¦åœ¨ä½¿ç”¨å‰è¿›è¡Œæ³¨å†Œï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨AppDelegateä¸­ï¼Œå¦‚ä¸‹ï¼š 123[WXSDKEngine registerModule:@&quot;test&quot; withClass:[WeexCustomModule class]];[WXSDKEngine registerModule:@&quot;user&quot; withClass:[HMBUserModule class]];[WXSDKEngine registerHandler:[HMBWeexImageLoader new] withProtocol:@protocol(WXImgLoaderProtocol)]; åŸºæœ¬çš„WeexçŸ¥è¯†å°±æ˜¯è¿™äº›ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚ç…§å®˜æ–¹æ–‡æ¡£å’Œdemoé“¾æŽ¥ã€‚ä¸‹ç¯‡å¼€å§‹è®²è§£weexæºç ï¼Œæœªä½¿ç”¨è¿‡weexçš„å»ºè®®å…ˆå°è¯•ä½¿ç”¨weexã€‚]]></content>
    </entry>

    
  
  
</search>
