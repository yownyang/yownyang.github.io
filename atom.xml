<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YownYang&#39;s blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-03-24T04:18:28.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>YownYang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS-Weexæºç è§£æ</title>
    <link href="http://yoursite.com/2017/03/14/Weex_3/"/>
    <id>http://yoursite.com/2017/03/14/Weex_3/</id>
    <published>2017-03-14T11:26:52.000Z</published>
    <updated>2017-03-24T04:18:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ä»¥åŠé‡è¦æ€§ï¼Œè¿™ä¸€ç¯‡å°†æ­£å¼å¼€å§‹Weexæºç çš„è§£æï¼Œç‰ˆæœ¬æ˜¯0.10.0</p>
<a id="more"></a>
<h3 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h3><p>å­¦ä¹ ä¸€ä¸ªå¼€æºåº“ï¼Œæœ€å¥½æ˜¯çŸ¥å…¶æ€æƒ³ï¼Œæ‰¾å…¶å…¥å£ï¼Œå­¦å…¶æ ¸å¿ƒã€‚å¤§è‡´æ€æƒ³åœ¨ç¬¬ä¸€ç¯‡ï¼Œæ ¸å¿ƒæ–‡ä»¶å¤¹çš„åˆ†ç±»åœ¨ç¬¬äºŒç¯‡ï¼Œè¿™ä¸€ç¯‡å°±ä»å…¶å…¥å£æ–‡ä»¶å¼€å§‹å­¦ä¹ ã€‚</p>
<p>WeexDemoçš„å…¥å£æ˜¯<code>[WXSDKEngine initSDKEnvironment];</code>ã€‚è¿™ä¸ªMethodçš„ä¸»è¦ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSString *filePath = [[NSBundle bundleForClass:self] pathForResource:@&quot;main&quot; ofType:@&quot;js&quot;];</div><div class="line">NSString *script = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];</div><div class="line">[WXSDKEngine initSDKEnvironment:script];</div></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œè¯»å–ä¸€ä¸ªå«åšmain.jsçš„æ–‡ä»¶å†…å®¹ï¼Œç„¶åå°†å…¶å†…å®¹ä½œä¸º<code>[WXSDKEngine initSDKEnvironment:script]</code>åˆå§‹åŒ–çš„å‚æ•°ã€‚<br>æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä¸ªmethodçš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if (!script || script.length &lt;= 0) &#123;</div><div class="line">        WX_MONITOR_FAIL(WXMTJSFramework, WX_ERR_JSFRAMEWORK_LOAD, @&quot;framework loading is failure!&quot;);</div><div class="line">        return;</div><div class="line">&#125;</div><div class="line">[self registerDefaults];</div><div class="line">[[WXSDKManager bridgeMgr] executeJsFramework:script];</div></pre></td></tr></table></figure>
<h3 id="æ³¨å†Œå’Œæ‰§è¡Œ"><a href="#æ³¨å†Œå’Œæ‰§è¡Œ" class="headerlink" title="æ³¨å†Œå’Œæ‰§è¡Œ"></a>æ³¨å†Œå’Œæ‰§è¡Œ</h3><h4 id="Register"><a href="#Register" class="headerlink" title="Register"></a>Register</h4><p>é¦–å…ˆï¼Œæ˜¯å¯¹ä¼ é€’è¿›æ¥çš„jsä»£ç åšåˆ¤æ–­ï¼Œå…¶æ¬¡è°ƒç”¨äº†ä¸€ä¸ª<code>registerDefaults</code>çš„methodï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">static dispatch_once_t onceToken;</div><div class="line">dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">    [self _registerDefaultComponents];</div><div class="line">    [self _registerDefaultModules];</div><div class="line">    [self _registerDefaultHandlers];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="Register-Componet"><a href="#Register-Componet" class="headerlink" title="Register Componet"></a>Register Componet</h5><p>è¿™ä¸ªmethodä½¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œå¯¹Weexå®šä¹‰çš„Componentã€Moduleã€Handlerè¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œä»£ç å¤ªé•¿ï¼Œæˆ‘å°±ä¸è´´äº†ã€‚æ³¨å†ŒComponentï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">+ (void)registerComponent:(NSString *)name withClass:(Class)clazz</div><div class="line">&#123;</div><div class="line">    [self registerComponent:name withClass:clazz withProperties: @&#123;@&quot;append&quot;:@&quot;tree&quot;&#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)registerComponent:(NSString *)name withClass:(Class)clazz withProperties:(NSDictionary *)properties</div><div class="line">&#123;</div><div class="line">    if (!name || !clazz) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    WXAssert(name &amp;&amp; clazz, @&quot;Fail to register the component, please check if the parameters are correct ï¼&quot;);</div><div class="line">    </div><div class="line">    [WXComponentFactory registerComponent:name withClass:clazz withPros:properties];</div><div class="line">    NSMutableDictionary *dict = [WXComponentFactory componentMethodMapsWithName:name];</div><div class="line">    dict[@&quot;type&quot;] = name;</div><div class="line">    if (properties) &#123;</div><div class="line">        NSMutableDictionary *props = [properties mutableCopy];</div><div class="line">        if ([dict[@&quot;methods&quot;] count]) &#123;</div><div class="line">            [props addEntriesFromDictionary:dict];</div><div class="line">        &#125;</div><div class="line">        [[WXSDKManager bridgeMgr] registerComponents:@[props]];</div><div class="line">    &#125; else &#123;</div><div class="line">        [[WXSDKManager bridgeMgr] registerComponents:@[dict]];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªmethodä¸­æ¯”è¾ƒè®©äººè¿·æƒ‘çš„ä¹Ÿå°±æ˜¯Propertiesä¸­çš„å‚æ•°äº†ï¼Œè¿™ä¸ªå…¶å®æ˜¯vueçš„æ¸²æŸ“æ¨¡å¼ã€‚<code>@&quot;append&quot;:@&quot;tree&quot;</code>ä»£è¡¨æ˜¯æ•´ä¸ªvueç»“ç‚¹åŒ…æ‹¬å­ç»“ç‚¹ç”Ÿæˆå®Œä¹‹åæ‰ä¼šä¸€æ¬¡æ€§æ¸²æŸ“åˆ°å±å¹•ï¼Œ<code>@&quot;append&quot;:@&quot;node&quot;</code>ä»£è¡¨æ˜¯å…ˆæ¸²æŸ“è‡ªèº«ç„¶åå†æ¸²æŸ“å­èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªmethodä¸­å…ˆå¯¹nameå’Œclassè¿›è¡Œåˆ¤ç©ºï¼Œå…¶æ¬¡ä½¿ç”¨<code>WXComponentFactory</code>è¿›è¡Œæ³¨å†Œï¼Œåœ¨è¿™ä¹‹å‰å…ˆè®²å‡ ä¸ªç›¸å…³ç±»çš„åŠŸèƒ½ï¼Œå…å¾—è¿·ç³Šã€‚</p>
<ul>
<li>WXInvocationConfigï¼šæŠ½è±¡å•ä¾‹ç±»ï¼Œä¸ºä»€ä¹ˆç”¨å•ä¾‹(æ‡µé€¼è„¸)ï¼Œä½¿ç”¨æ—¶éœ€è¦å­ç±»ç»§æ‰¿</li>
<li>WXComponentConfig: ç»§æ‰¿<code>WXInvocationConfig</code>ç±»ï¼Œå­˜å‚¨æ¯ä¸ªComponentçš„methodã€nameã€classname</li>
<li>WXComponentFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸å­˜å‚¨<code>WXComponentConfig</code>å¯¹è±¡ï¼Œé€šè¿‡æ¯ä¸ª<code>WXComponentConfig</code>å¯¹è±¡æ“ä½œæ¯ä¸ªComponentçš„methodã€nameã€classnameã€‚</li>
</ul>
<p>é¦–å…ˆé€šè¿‡<code>WXComponentFactory</code>è°ƒç”¨<code>- (void)registerComponent:(NSString 
*)name withClass:(Class)clazz withPros:(NSDictionary *)pros</code>æ–¹æ³•æ³¨å†Œã€‚ä½¿ç”¨Assertåˆ¤æ–­ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª<code>WXComponentConfig</code>å¯¹è±¡ï¼Œå…ˆä»å­—å…¸ä¸­å–ï¼Œä¸è®ºæ˜¯å¦å­˜åœ¨éƒ½é‡æ–°åˆå§‹åŒ–ï¼Œå¹¶å°†å…¶è¦†ç›–ï¼Œè°ƒç”¨<code>[config registerMethods];</code>å°†ç±»ä¸­çš„methodé€šè¿‡runtimeå­˜å‚¨åœ¨<code>WXComponentConfig</code>ä¸­ï¼Œå­˜å–æ—¶åŠ é”ä¿è¯å®‰å…¨ã€‚å…¶æ¬¡è°ƒç”¨<code>- (NSMutableDictionary *)_componentMethodMapsWithName:(NSString *)name</code>æ–¹æ³•è·å–æŸä¸ªcomponentæ‰€æœ‰çš„methodï¼ŒåŒæ ·æ˜¯åŠ é”è¯»å–ã€‚æ ¹æ®æœ‰æ²¡æœ‰propertiesä¼ é€’ä¸åŒå‚æ•°ï¼Œå¦‚æœç±»ä¸­æœ‰å¯¼å‡ºç»™weexç”¨çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸€å®šä¼šä¼ é€’methodå’Œnameè¿‡å»ã€‚æœ€åè°ƒç”¨JSæ–¹æ³•<code>registerComponents</code>ï¼Œæˆ‘åœ¨vue.jsçš„æºç ä¸­æ˜¯æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•äº†çš„ã€‚å¯¹äºå…·ä½“è°ƒç”¨JSçš„è¿‡ç¨‹ï¼Œä¼šåœ¨ExecuteJsæ¨¡å—è®²è§£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">export function registerComponents (newComponents) &#123;</div><div class="line">  if (Array.isArray(newComponents)) &#123;</div><div class="line">    newComponents.forEach(component =&gt; &#123;</div><div class="line">      if (!component) &#123;</div><div class="line">        return</div><div class="line">      &#125;</div><div class="line">      if (typeof component === &apos;string&apos;) &#123;</div><div class="line">        components[component] = true</div><div class="line">      &#125; else if (typeof component === &apos;object&apos; &amp;&amp; typeof component.type === &apos;string&apos;) &#123;</div><div class="line">        components[component.type] = component</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="Register-Module"><a href="#Register-Module" class="headerlink" title="Register Module"></a>Register Module</h5><p>æ³¨å†ŒModuleï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">WXAssert(name &amp;&amp; clazz, @&quot;Fail to register the module, please check if the parameters are correct ï¼&quot;);   </div><div class="line">NSString *moduleName = [WXModuleFactory registerModule:name withClass:clazz];</div><div class="line">NSDictionary *dict = [WXModuleFactory moduleMethodMapsWithName:moduleName];</div><div class="line">[[WXSDKManager bridgeMgr] registerModules:dict];</div></pre></td></tr></table></figure>
<p>å…ˆä»‹ç»å‡ ä¸ªç±»ï¼š</p>
<ul>
<li>WXModuleConfigï¼šç»§æ‰¿<code>WXInvocationConfig</code>ç±»ï¼Œå­˜å‚¨æ¯ä¸ªComponentçš„methodã€name</li>
<li>WXModuleFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸æ“ä½œ<code>WXModuleConfig</code>å¯¹è±¡</li>
</ul>
<p>æŸ¥é˜…ä¸‹è¿™ä¸¤ä¸ªç±»çš„ä»£ç ä¼šå‘ç°è·ŸComponentç»“æ„ç±»ä¼¼ï¼Œè·Ÿæ³¨å†ŒComponentæµç¨‹ä¹Ÿä¸€æ ·ï¼Œæ„Ÿè§‰æ²¡å¿…è¦åºŸè¯ä¸€éäº†ï¼Œæœ€åè°ƒç”¨JSæ–¹æ³•<code>registerModules</code>ã€‚</p>
<h5 id="Register-Handler"><a href="#Register-Handler" class="headerlink" title="Register Handler"></a>Register Handler</h5><p>æ³¨å†ŒHandlerï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">WXAssert(handler &amp;&amp; protocol, @&quot;Fail to register the handler, please check if the parameters are correct ï¼&quot;);</div><div class="line">    </div><div class="line">[WXHandlerFactory registerHandler:handler withProtocol:protocol];</div></pre></td></tr></table></figure>
<p>ç…§ä¾‹ä»‹ç»å‡ ä¸ªç±»ï¼š</p>
<ul>
<li>WXHandlerFactoryï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡å­—å…¸å­˜å‚¨åè®®å¯¹è±¡ï¼Œå°†åè®®çš„å­—ç¬¦ä¸²ä½œä¸ºkeyå­˜å‚¨</li>
</ul>
<p>æ³¨å†ŒHandlerï¼Œè¿™ä¸ªä¸éœ€è¦ä¼ ç»™weexï¼Œå› ä¸ºå°±æ˜¯æˆ‘ä»¬Nativeç«¯è¿›è¡Œè°ƒç”¨ã€‚æ‰€ä»¥åªéœ€è¦ä½¿ç”¨WXHandlerFactoryæ“ä½œå°±è¡Œäº†ã€‚</p>
<h4 id="ExecuteJs"><a href="#ExecuteJs" class="headerlink" title="ExecuteJs"></a>ExecuteJs</h4><p>æœ€åè°ƒç”¨<code>[[WXSDKManager bridgeMgr] executeJsFramework:script];</code>æ‰§è¡Œjsä»£ç ã€‚è¿™ä¸€å—çš„çŸ¥è¯†ç‚¹æ˜¯Weexä¸jsçš„äº¤äº’ï¼Œæ‰€ä»¥éœ€è¦äº†è§£ä¸‹é¢å‡ ä¸ªç±»ï¼Œå¹¶ä¸”å¯¹OCä¸­çš„JavaScriptCoreæ¡†æ¶æœ‰æ‰€äº†è§£ã€‚</p>
<p>é¦–å…ˆä»‹ç»å‡ ä¸ªç±»ï¼š</p>
<ul>
<li>WXSDKInstanceï¼šæ™®é€šç±»ï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªç±»ä¼¼äºControllerçš„ç±»ï¼Œå…·æœ‰éå¸¸å¤šçš„åŠŸèƒ½ï¼Œç›®å‰ä¸éœ€è¦äº†è§£å…·ä½“åŠŸèƒ½</li>
<li>WXSDKManagerï¼šå•ä¾‹ç±»ï¼Œé€šè¿‡ä¸€ä¸ªå­—å…¸å­˜å‚¨æ‰€æœ‰<code>WXSDKInstance</code>å®ä¾‹ï¼Œkeyæ˜¯ä¸€ä¸ªå”¯ä¸€å€¼ï¼›ä¸€ä¸ª<code>WXBridgeManager</code>å®ä¾‹</li>
<li>WXBridgeManagerï¼šå•ä¾‹ç±»ï¼Œæ³¨å†Œï¼Œæ¸²æŸ“åŠŸèƒ½éƒ½é€šè¿‡è°ƒç”¨<code>WXBridgeContext</code>å¯¹è±¡å»è·ŸJSäº¤äº’</li>
<li>WXBridgeContextï¼šåŠŸèƒ½å…¶å®ä¸å¤šï¼Œrenderï¼Œregist componentï¼Œregist moduleï¼ŒexecuteJsã€‚å°±æ˜¯å¤„ç†äº†éœ€è¦è°ƒç”¨jsçš„é€»è¾‘ã€‚</li>
<li>WXJSCoreBridge: è¿™ä¸ªç±»æ‰æ˜¯çœŸæ­£çš„å¤„ç†JSè°ƒç”¨çš„ç±»ã€‚å®ƒå®ç°äº†WXBridgeProtocolåè®®ï¼Œå¯¹JavaScriptCoreè¿›è¡Œäº†å°è£…ï¼Œä½¿<code>WXBridgeContext</code>è°ƒç”¨</li>
</ul>
<p>ç°åœ¨å¯ä»¥ä»é‚£å¥ä»£ç å¼€å§‹è®²äº†ï¼Œ<code>[WXSDKManager bridgeMgr]</code>è¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œä»–åœ¨JSçº¿ç¨‹è°ƒç”¨<code>executeJsFramework</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if (!script) return;</div><div class="line">__weak typeof(self) weakSelf = self;</div><div class="line">WXPerformBlockOnBridgeThread(^()&#123;</div><div class="line">    [weakSelf.bridgeCtx executeJsFramework:script];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å…ˆæ˜¯åˆ¤ç©ºï¼Œå…¶æ¬¡weakSelfé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œç„¶ååœ¨ä¸€ä¸ªå«åš<code>&quot;com.taobao.weex.bridge&quot;</code>çš„çº¿ç¨‹è°ƒç”¨<code>executeJsFramework</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">WXAssertBridgeThread();</div><div class="line">WXAssertParam(script);</div><div class="line">    </div><div class="line">WX_MONITOR_PERF_START(WXPTFrameworkExecute);</div><div class="line">    </div><div class="line">[self.jsBridge executeJSFramework:script];</div><div class="line">    </div><div class="line">WX_MONITOR_PERF_END(WXPTFrameworkExecute);</div><div class="line">    </div><div class="line">if ([self.jsBridge exception]) &#123;</div><div class="line">    NSString *message = [NSString stringWithFormat:@&quot;JSFramework executes error: %@&quot;, [self.jsBridge exception]];</div><div class="line">    WX_MONITOR_FAIL(WXMTJSFramework, WX_ERR_JSFRAMEWORK_EXECUTE, message);</div><div class="line">&#125; else &#123;</div><div class="line">    WX_MONITOR_SUCCESS(WXMTJSFramework);</div><div class="line">    //the JSFramework has been load successfully.</div><div class="line">    self.frameworkLoadFinished = YES;</div><div class="line">    </div><div class="line">    [self executeAllJsService];</div><div class="line">    </div><div class="line">    JSValue *frameworkVersion = [self.jsBridge callJSMethod:@&quot;getJSFMVersion&quot; args:nil];</div><div class="line">    if (frameworkVersion &amp;&amp; [frameworkVersion isString]) &#123;</div><div class="line">        [WXAppConfiguration setJSFrameworkVersion:[frameworkVersion toString]];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //execute methods which has been stored in methodQueue temporarily.</div><div class="line">    for (NSDictionary *method in _methodQueue) &#123;</div><div class="line">        [self callJSMethod:method[@&quot;method&quot;] args:method[@&quot;args&quot;]];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    [_methodQueue removeAllObjects];</div><div class="line">    </div><div class="line">    WX_MONITOR_PERF_END(WXPTInitalize);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆæ–­è¨€å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯<code>&quot;com.taobao.weex.bridge&quot;</code>çº¿ç¨‹ï¼Œå…¶æ¬¡æ–­è¨€jsä»£ç ï¼Œä½¿ç”¨<code>WXBridgeProtocol</code>åè®®å¯¹è±¡æ‰§è¡Œjsä»£ç ï¼Œæ¥ç€åˆ¤æ–­jsæ‰§è¡Œæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œæœ‰å¼‚å¸¸è¾“å‡ºï¼Œæ— å¼‚å¸¸ï¼Œæ ‡è®°è¯»å–ç»“æŸï¼Œæ‰§è¡Œæ‰€æœ‰çš„jsServiceï¼Œè·å–JSFMVersionï¼Œæ‰§è¡ŒmethodQueueä¸­æ‰€æœ‰çš„methodï¼Œæ¸…é™¤ä¿¡æ¯ï¼Œç»“æŸã€‚</p>
<h3 id="JavaScriptCore"><a href="#JavaScriptCore" class="headerlink" title="JavaScriptCore"></a>JavaScriptCore</h3><h4 id="JavaScriptCoreç®€ä»‹"><a href="#JavaScriptCoreç®€ä»‹" class="headerlink" title="JavaScriptCoreç®€ä»‹"></a>JavaScriptCoreç®€ä»‹</h4><p>ä¸Šé¢åªæ˜¯ç†æ¸…äº†é€»è¾‘ï¼Œå¦‚æœå¯¹JavaScriptCoreä¸äº†è§£çš„äººå¯èƒ½çœ‹æºç æ—¶æœ‰äº›æ‡µé€¼ï¼Œä¸‹é¢æˆ‘è®²è§£ä¸€äº›JavaScriptCoreçš„åŸºæœ¬æ¦‚å¿µä»¥åŠç”¨æ³•ã€‚</p>
<ul>
<li>JSVirtualMachineï¼šä¸ºJavaScriptæä¾›è¿è¡Œèµ„æº</li>
<li>JSContextï¼šä¸ºJavaScriptæä¾›è¿è¡Œç¯å¢ƒ</li>
<li>JSValueï¼šå¯ä»¥å°†JavaScriptå˜é‡è½¬æ¢ä¸ºOCå˜é‡ï¼Œä¹Ÿå¯ä»¥å°†OCå˜é‡è½¬æ¢ä¸ºJavaScriptå˜é‡</li>
</ul>
<h4 id="JavaScriptCoreç¤ºä¾‹"><a href="#JavaScriptCoreç¤ºä¾‹" class="headerlink" title="JavaScriptCoreç¤ºä¾‹"></a>JavaScriptCoreç¤ºä¾‹</h4><p>è¿™äº›æ˜¯Weexä½¿ç”¨çš„JavaScriptCoreæ¡†æ¶ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå…¶å®è¿˜æœ‰åˆ«çš„ã€‚å…ˆæ¥ä¸€æ®µä»£ç å¥½äº†ï¼š</p>
<h5 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">JSContext *context = [[JSContext alloc] init];</div><div class="line">JSValue *value = [context evaluateScript:@&quot;var sum = 2 + 3; sum&quot;];</div><div class="line">NSLog(@&quot;%@&quot;, value); è¾“å‡º5</div><div class="line">context[@&quot;sum&quot;] = @&quot;40&quot;;</div><div class="line">NSLog(@&quot;%@&quot;, context[@&quot;sum&quot;]); è¾“å‡º40</div></pre></td></tr></table></figure>
<p>é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªJSContextå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>JSVirtualMachine</code>å¯¹è±¡åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆå§‹åŒ–ï¼Œç›´æ¥åˆå§‹åŒ–ç³»ç»Ÿä»ä¼šåœ¨å†…éƒ¨ç»™ä½ åˆå§‹åŒ–ä¸€ä¸ª<code>JSVirtualMachine</code>å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªjsè¿è¡Œçš„èµ„æºï¼Œä¸å¯æˆ–ç¼ºã€‚</p>
<p>ç¬¬äºŒå¥ä»£ç çš„æ„æ€æ˜¯å…ˆä½¿ç”¨contextå¯¹è±¡è¿è¡Œjsä»£ç ï¼Œå®šä¹‰ä¸€ä¸ªå«åšsumçš„å˜é‡ï¼Œå¹¶èµ‹å€¼2+3ï¼Œç„¶åå°†sumèµ‹å€¼ç»™valueã€‚</p>
<p>ç¬¬ä¸‰å¥ä»£ç è¾“å‡ºvalueçš„å€¼æ˜¯5ï¼Œç¬¬å››å¥ä»£ç ç»™sumèµ‹å€¼40ï¼Œç¬¬äº”å¥è¾“å‡ºsumå€¼ä¸º40ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºJSContextæ˜¯jsçš„ç¯å¢ƒï¼Œè€Œä¸”åœ¨jsä¸­ï¼Œæ‰€æœ‰å…¨å±€å˜é‡å’Œæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡çš„å±æ€§ã€‚æ‰€ä»¥åœ¨ç¬¬å››å¥ï¼Œä½ å¯ä»¥ç›´æ¥ä»contextä¸­å–å‡ºsumè¿™ä¸ªå˜é‡ï¼Œå¹¶èµ‹å€¼ã€‚</p>
<h5 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_jsContext.exceptionHandler = ^(JSContext *context, JSValue *exception) &#123;</div><div class="line">        context.exception = exception;</div><div class="line">        NSString *message = [NSString stringWithFormat:@&quot;[%@:%@:%@] %@\n%@&quot;, exception[@&quot;sourceURL&quot;], exception[@&quot;line&quot;], exception[@&quot;column&quot;], exception, [exception[@&quot;stack&quot;] toObject]];</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹å°±æ˜¯è¿™é‡Œï¼ŒJavaScriptCoreä¼šåœ¨<code>exceptionHandler</code>ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ºäº†æˆ‘ä»¬èƒ½åœ¨è¿™ä¸ªæ—¶å€™åšç‚¹ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬èµ‹å€¼ç»™ä»–ä¸€ä¸ªblcokã€‚å¹¶ä¸”å¦‚æœä½ è¦åœ¨blockä¸­ä½¿ç”¨contextå¯¹è±¡ï¼Œè¦ä¹ˆå°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’è¿›blockï¼Œè¦ä¹ˆä½¿ç”¨<code>[JSContext currentContext]</code>è·å–å½“å‰çš„contextã€‚å¦‚æœç›´æ¥å¼•ç”¨å¤–éƒ¨çš„contextä¼šé€ æˆå¾ªç¯é¥®ç”¨ã€‚</p>
<h5 id="invokeMethod"><a href="#invokeMethod" class="headerlink" title="invokeMethod"></a>invokeMethod</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">JSContext *context = [[JSContext alloc] init];</div><div class="line">[context evaluateScript:@&quot;function add(a, b) &#123; return a + b; &#125;&quot;];    </div><div class="line">JSValue *sum = [[context globalObject] invokeMethod:@&quot;add&quot; withArguments:@[@(3), @(4)]];</div><div class="line">NSLog(@&quot;%@&quot;, sum); è¾“å‡º7</div></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–ä¸€ä¸ªcontextï¼Œå°†ä¸€ä¸ªåä¸ºaddçš„methodåŠ å…¥åˆ°contextä¸­ï¼Œä½¿ç”¨jså…¨å±€å˜é‡è°ƒç”¨addæ–¹æ³•ï¼Œå¹¶ä¼ å…¥å‚æ•°3ï¼Œ4ï¼Œè¾“å‡ºç»“æœä¸º7ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸Šé¢è®²äº†Weexæ³¨å†Œçš„åŸºæœ¬é€»è¾‘å’ŒJavaScriptCoreæ¡†æ¶çš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œæˆ‘æƒ³åº”è¯¥å¯¹ç†è§£Weexæ¡†æ¶çš„è¿ä½œåŸç†æœ‰å¸®åŠ©çš„ã€‚å…¶å®å‰©ä¸‹çš„æºç è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å‘jsç«¯å‘é€æ¶ˆæ¯ç­‰ï¼Œä½†å…¶å®è´¨é€ƒä¸è¿‡ä¸Šé¢çš„æµç¨‹ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºä¹Ÿæ²¡æœ‰å¾€ä¸‹å†™çš„å¿…è¦äº†ã€‚æœ€åï¼Œä¸ºå¤§å®¶æ•´ç†ä¸‹ç±»çš„è°ƒç”¨é¡ºåºã€‚<br><img src="https://github.com/yownyang/Resource/raw/master/Image/Weex/WeexCallJS.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ä»¥åŠé‡è¦æ€§ï¼Œè¿™ä¸€ç¯‡å°†æ­£å¼å¼€å§‹Weexæºç çš„è§£æï¼Œç‰ˆæœ¬æ˜¯0.10.0&lt;/p&gt;
    
    </summary>
    
      <category term="Weex" scheme="http://yoursite.com/categories/Weex/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS-Weexæºç æ–‡ä»¶å¤¹çš„è§£é‡Š</title>
    <link href="http://yoursite.com/2017/03/14/Weex_2/"/>
    <id>http://yoursite.com/2017/03/14/Weex_2/</id>
    <published>2017-03-14T08:01:24.000Z</published>
    <updated>2017-03-15T03:37:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexåœ¨iOSç«¯çš„ç”¨æ³•ï¼Œè¿™ä¸€ç¯‡ä»‹ç»ä¸‹Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ï¼Œç‰ˆæœ¬æ˜¯0.10.0</p>
<a id="more"></a>
<h3 id="Weexæ–‡ä»¶å¤¹"><a href="#Weexæ–‡ä»¶å¤¹" class="headerlink" title="Weexæ–‡ä»¶å¤¹"></a>Weexæ–‡ä»¶å¤¹</h3><pre><code>*æœ€ä¸é‡è¦çš„æ–‡ä»¶å¤¹ï¼šControllerã€Debugã€Handler
*ä¸é‡è¦çš„æ–‡ä»¶å¤¹ï¼šLoaderã€Monitorã€Networkã€Utilityã€WebSocket
*ç¨å¾®é‡è¦çš„æ–‡ä»¶å¤¹ï¼šComponentã€Moduleã€Protocol
*é‡è¦çš„æ–‡ä»¶å¤¹ï¼šDisplayã€Eventsã€Layoutã€View
*æœ€é‡è¦çš„æ–‡ä»¶å¤¹ï¼šBridgeã€Engineã€Managerã€Model
</code></pre><blockquote>
<p>Controller: ä¸€ä¸ªç»§æ‰¿UIViewControllerçš„ç±»ï¼Œä¸€ä¸ªç»§æ‰¿UINavigationController.ä½ å®Œå…¨ç”¨ä¸åˆ°ï¼Œé…±æ²¹ï¼›</p>
<p>Debugï¼šä¸€ä¸ªè°ƒè¯•ç±»ï¼Œé…±æ²¹ï¼›</p>
<p>Handlerï¼šä¸¤ä¸ªç±»å®ç°äº†ä¸¤ä¸ªWeexçš„Protocolï¼Œé…±æ²¹ï¼›</p>
<p>Loaderï¼šä¸€ä¸ªç±»æ˜¯Networkçš„å›è°ƒå®ç°ï¼Œä¸€ä¸ªç±»æ˜¯WebSocketçš„å›è°ƒã€‚</p>
<p>Monitorï¼šä¸€ä¸ªç›‘æµ‹çš„ç±»ï¼Œè¾“å‡ºä¸€äº›ä¿¡æ¯ã€‚</p>
<p>Network:ä¸€ä¸ªå°å‹çš„ç½‘ç»œè¯·æ±‚åº“</p>
<p>Utilityï¼šä¸€äº›å¸¸ç”¨æ–¹æ³•çš„å°è£…</p>
<p>WebSocketï¼šå¯¹SRWebSocketçš„å°è£…</p>
<p>Componetï¼šå¯¹å„ç§viewçš„å°è£…ï¼Œå¦‚æœéœ€è¦æ‰©å±•viewå°±è·Ÿè¿™ä¸ªæœ‰å…³</p>
<p>Moduleï¼šæä¾›å„ç§æ–¹æ³•ç»™Componetä½¿ç”¨ï¼ŒWeexå°è£…çš„éƒ½æ˜¯ç»™Weexå®šä¹‰çš„Componetç”¨ï¼Œä¸€èˆ¬éƒ½æ˜¯è‡ªå®šä¹‰Method</p>
<p>Protocolï¼šæä¾›å„ç§åè®®ï¼ŒHandleræ‰€å®ç°çš„åè®®å°±æ˜¯è¿™é‡Œé¢çš„ï¼Œæ„Ÿè§‰weexæä¾›çš„å·²ç»å¤Ÿç”¨äº†ã€‚</p>
<p>Displayï¼šWXComponentçš„å±•ç¤º</p>
<p>Eventsï¼šWXComponentçš„äº‹ä»¶</p>
<p>Layoutï¼šWXComponentçš„å¸ƒå±€</p>
<p>Viewï¼šWXComponentçš„View</p>
<p>Bridgeï¼šWeexä¸NativeJSä¹‹é—´çš„æ¡¥æ¥</p>
<p>Engineï¼šWeexçš„å…¥å£ï¼Œç”¨äºåˆå§‹åŒ–Envï¼Œæ³¨å†ŒComponetã€Moduleã€Handlerï¼Œé‡è½½ç­‰</p>
<p>Modelï¼šWXComponentæ˜¯Componetçš„æ ¹ç±»ï¼ŒWXSDKInstanceç±»ä¼¼Nativeçš„Controllerï¼Œæ‹¥æœ‰è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥å•é“¾è¡¨å½¢å¼å­˜å‚¨çš„çˆ¶WXSDKInstanceå®ä¾‹ï¼Œè‡ªèº«çš„viewï¼Œrenderç­‰ã€‚</p>
<p>Managerï¼šWeexä¸­å„ç§ç®¡ç†çš„ç±»</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šä¸€ç¯‡ä»‹ç»äº†Weexåœ¨iOSç«¯çš„ç”¨æ³•ï¼Œè¿™ä¸€ç¯‡ä»‹ç»ä¸‹Weexä¸­æ–‡ä»¶å¤¹çš„ä½œç”¨ï¼Œç‰ˆæœ¬æ˜¯0.10.0&lt;/p&gt;
    
    </summary>
    
      <category term="Weex" scheme="http://yoursite.com/categories/Weex/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS-Book</title>
    <link href="http://yoursite.com/2017/02/26/ReadBook_iOS/"/>
    <id>http://yoursite.com/2017/02/26/ReadBook_iOS/</id>
    <published>2017-02-26T11:03:08.000Z</published>
    <updated>2017-03-25T07:33:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>iOSç›¸å…³ä¹¦ç±â€¦</p>
<a id="more"></a>
<ol>
<li><strong>ã€ŠiOS7åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹</strong>åœ¨æœ‹å‹é‚£çœ‹åˆ°çš„ä¸€æœ¬ä¹¦ï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´æŠŠè¿™æœ¬ä¹¦ç¿»äº†ä¸€éï¼Œæ„Ÿè§‰é€‚åˆæœ‰ä¸€äº›ç¼–ç¨‹æ¦‚å¿µçš„äººçœ‹ã€‚å…¶æ¬¡ï¼Œè¿™æœ¬ä¹¦æŸäº›çŸ¥è¯†ç‚¹å¯¹äºå½“ä¸‹è¿‡äºå¤è€ï¼Œå¦‚<strong>14.2</strong>æ‰‹åŠ¿äº‹ä»¶ã€<strong>11.3.5</strong>çš„<code>UIViewAutoresizing</code>ç­‰ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šè¿™æœ¬ä¹¦æ˜¯å¦æœ‰æ–°ç‰ˆã€‚æ­¤å¤–ï¼Œå¦‚æœæœªç”¨åˆ°CoreDataå’ŒAudio/Videoçš„ï¼Œå»ºè®®ç²—ç•¥æŸ¥çœ‹<strong>16</strong>ã€<strong>17</strong>ç« ï¼Œè¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹æ¯ä¸ªéƒ½æ˜¯ä¸€ä¸ªé¢†åŸŸï¼Œå½“ç„¶å¦‚æœå°±æ˜¯å†²ç€è¿™çŸ¥è¯†ç‚¹å»çš„ï¼Œé‚£ä¹Ÿå¯ä»¥å½“æˆåŸºç¡€æ¦‚å¿µçš„äº†è§£åŠä½¿ç”¨ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æœ¬ä¹¦å¯¹äºä¿®è¡¥åŸºç¡€çŸ¥è¯†ç©ºç¼ºæˆ–æ˜¯iOSåˆå­¦è€…è¿˜æ˜¯æœ‰ä¸é”™çš„å¸®åŠ©ã€‚</li>
<li><strong>ã€ŠiOSå¼€å‘è¿›é˜¶ã€‹</strong>è¿™æœ¬ä¹¦ä½œè€…æ˜¯å”å·§ï¼Œç¬¬ä¸€éƒ¨åˆ†è®²äº†å¾ˆå¤šå·¥å…·ï¼Œå äº†ä¸€åŠè¾“çš„åšåº¦ï¼›ç¬¬äºŒéƒ¨åˆ†è®²äº†å¾ˆå¤šçš„å®æˆ˜å°çªé—¨ï¼Œç¬¬ä¸‰éƒ¨åˆ†åˆæ­¥è®²äº†ä¸€ä¸‹OCå¯¹è±¡ï¼ŒæŒ‡é’ˆï¼ŒblockåŸç†è¿™äº›ã€‚è¿™æœ¬ä¹¦çœŸçš„æ˜¯ä¹¦å¦‚å…¶åï¼Œè¿›é˜¶å¼€å‘ã€‚ã€‚ã€‚å¹¶æ²¡æœ‰è®²è§£å¾ˆå¤šçš„åŸç†å±‚æ¬¡çš„ä¸œè¥¿ï¼Œæ›´å¤šçš„å°±æ˜¯ä¸šåŠ¡å±‚æ¬¡çš„ã€‚æ‰€ä»¥æœ‰å¾ˆå¤šäººè¯´å°±æ˜¯æ··çš„ï¼Œä¹Ÿæœ‰äººè¯´å†™çš„OKï¼Œæˆ‘æ„Ÿè§‰ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºå§ã€‚</li>
<li><strong>ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ã€‹</strong>è¿™æœ¬ä¹¦æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„ï¼Œåæ­£ä¸çŸ¥é“å«ä»€ä¹ˆï¼Œå“ˆå“ˆå“ˆã€‚è¿™æœ¬ä¹¦ä¹Ÿæœ‰å‡ å¹´äº†ï¼Œä¸»è¦è®²äº†ä¸‰ä¸ªä¸œè¥¿<code>å¼•ç”¨è®¡æ•°</code>ï¼Œ<code>Block</code>ï¼Œ<code>GCD</code>ã€‚ä»–å…¶ä¸­å¼•ç”¨äº†å¾ˆå¤šGNUstepçš„æºç ï¼Œä¸»è¦æ˜¯è‹¹æœè¿™éƒ¨åˆ†æºç ä¸å¼€æ”¾ï¼Œæ‘Šæ‰‹ã€‚è¿™æœ¬ä¹¦è®²è§£å†…å®¹ç›¸å¯¹æ¥è¯´æ¯”è¾ƒæ·±ï¼Œå¹¶ä¸”ä¸ä¸šåŠ¡æœ‰å…³çš„ä¸å¤šï¼Œé€‚åˆæƒ³äº†è§£è¿™å‡ ä¸ªçŸ¥è¯†ç‚¹åŸç†çš„äººçœ‹ã€‚</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;iOSç›¸å…³ä¹¦ç±â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="ReadBook" scheme="http://yoursite.com/categories/ReadBook/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS-Weexçš„ç®€å•ä½¿ç”¨</title>
    <link href="http://yoursite.com/2017/02/01/Weex_1/"/>
    <id>http://yoursite.com/2017/02/01/Weex_1/</id>
    <published>2017-02-01T08:33:44.000Z</published>
    <updated>2017-03-24T10:31:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦è®²è§£ä¸€ä¸‹Weexçš„å¤§æ¦‚åŸç†ä»¥åŠç®€å•çš„ä½¿ç”¨</p>
<a id="more"></a>
<h3 id="Weex"><a href="#Weex" class="headerlink" title="Weex"></a>Weex</h3><ul>
<li>ä¸RNç›¸åŒåŸç†ï¼ŒæŸäº›æ–¹é¢ä¼˜äºRN</li>
<li>jsè¯­æ³•ï¼Œæ¯”Nativeä½“éªŒç¨å·®ï¼Œæ¯”hybrid appä½“éªŒå¥½å¤ªå¤š</li>
<li>jsä¸€ç«¯ä»£ç ï¼Œä¸‰ç«¯ä½¿ç”¨</li>
<li>iOS/Androidè„±ç¦»å†™UIçš„å™©æ¢¦</li>
<li>æ–‡æ¡£ä¸å¤Ÿå®Œå–„</li>
</ul>
<h3 id="WeexåŸç†"><a href="#WeexåŸç†" class="headerlink" title="WeexåŸç†"></a>WeexåŸç†</h3><p><img src="https://github.com/yownyang/Resource/raw/master/Image/Weex/WeexTree.png" alt=""></p>
<h3 id="Weexä½¿ç”¨"><a href="#Weexä½¿ç”¨" class="headerlink" title="Weexä½¿ç”¨"></a>Weexä½¿ç”¨</h3><ul>
<li>é¦–å…ˆï¼Œåœ¨<code>AppDelegate</code>ä¸­è°ƒç”¨<code>[WXSDKEngine initSDKEnvironment]</code>è¿›è¡Œæ³¨å†Œ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</div><div class="line"></div><div class="line">    [WXSDKEngine initSDKEnvironment];    </div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å…¶æ¬¡ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„ViewControllerä¸­å®šä¹‰ä¸€ä¸ª<code>WXSDKInstance</code>å®ä¾‹å’ŒUIä¸ª<code>UIView</code>å®ä¾‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic) WXSDKInstance *instance;</div><div class="line">@property (nonatomic) UIView *weexView;</div></pre></td></tr></table></figure>
<ul>
<li>ç´§æ¥ç€ï¼Œåˆå§‹åŒ–<code>WXSDKInstance</code>å®ä¾‹ï¼Œè®¾ç½®å®ƒçš„viewControllerã€frameå±æ€§ï¼Œå®ç°å®ƒçš„ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">_instance = [[WXSDKInstance alloc] init];</div><div class="line">_instance.viewController = self;</div><div class="line">_instance.frame = [UIScreen mainScreen].bounds;</div><div class="line">    </div><div class="line">__weak typeof(self) weakSelf = self;</div><div class="line">_instance.onCreate = ^(UIView *view) &#123;</div><div class="line">    [weakSelf.weexView removeFromSuperview];</div><div class="line">    weakSelf.weexView = view;</div><div class="line">    [weakSelf.view addSubview:weakSelf.weexView];</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">_instance.onFailed = ^(NSError *error) &#123;</div><div class="line">    NSLog(@&quot;failed %@&quot;,error);</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">_instance.renderFinish = ^(UIView *view) &#123;</div><div class="line">    NSLog(@&quot;render finish&quot;);</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">_instance.onRenderProgress = ^(CGRect renderRect) &#123;</div><div class="line">    </div><div class="line">    NSLog(@&quot;renderProgress&quot;);</div><div class="line">&#125;;</div><div class="line">    </div><div class="line">_instance.updateFinish = ^(UIView *view) &#123;</div><div class="line">    NSLog(@&quot;update Finish&quot;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>æœ€åï¼Œä½¿ç”¨<code>WXSDKInstance</code>å®ä¾‹è°ƒç”¨<code>renderWithURL:</code>æ–¹æ³•å³å¯ã€‚è®°å¾—åœ¨<code>dealloc</code>ä¸­é‡Šæ”¾<code>WXSDKInstance</code>å®ä¾‹å“¦ğŸ˜¯</li>
</ul>
<p><code>[self.instance renderWithURL:[NSURL URLWithString:renderURL]];</code></p>
<h3 id="Weexçš„è‡ªå®šä¹‰"><a href="#Weexçš„è‡ªå®šä¹‰" class="headerlink" title="Weexçš„è‡ªå®šä¹‰"></a>Weexçš„è‡ªå®šä¹‰</h3><ul>
<li>Component: Weexç»„ä»¶ï¼Œweexå®˜æ–¹åŸºæœ¬æŠŠåŸç”Ÿçš„å®šä¹‰è¿‡äº†ï¼Œæ‰€ä»¥ä½ åŸºæœ¬ä¸éœ€è¦è‡ªå®šä¹‰ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰ï¼Œæ™®é€šç»„ä»¶ç»§æ‰¿<code>WXComponent</code>ï¼Œæ»‘åŠ¨ç»„ä»¶ç»§æ‰¿<code>WXScrollerComponent</code></li>
<li>handler: Nativeæä¾›ä¸€ä¸ªåè®®ã€‚weexå®˜æ–¹å®šä¹‰äº†å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå¦‚<code>WXImgLoaderProtocol</code>å›¾ç‰‡ä¸‹è½½ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰ï¼Œæ³¨æ„éœ€éµå®ˆåè®®<code>WXModuleProtocol</code></li>
<li>moduleï¼šjsè°ƒç”¨Native, è¿”å›å€¼å¯æœ‰å¯æ— ã€‚è¿™ä¸ªåŸºæœ¬ç”¨åˆ°å°±æ˜¯è‡ªå®šä¹‰ï¼Œéµå®ˆåè®®<code>WXModuleProtocol</code>ï¼Œéœ€è¦è‡ªå®šä¹‰Methodï¼Œå¦‚æœéœ€è¦è¿”å›å€¼ä½¿ç”¨<code>WXModuleCallback</code>è¿”å›</li>
<li>æ€»ç»“ï¼šComponentã€handlerã€moduleéƒ½éœ€è¦åœ¨ä½¿ç”¨å‰è¿›è¡Œæ³¨å†Œï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨AppDelegateä¸­ï¼Œå¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[WXSDKEngine registerModule:@&quot;test&quot; withClass:[WeexCustomModule class]];</div><div class="line">[WXSDKEngine registerModule:@&quot;user&quot; withClass:[HMBUserModule class]];</div><div class="line">[WXSDKEngine registerHandler:[HMBWeexImageLoader new] withProtocol:@protocol(WXImgLoaderProtocol)];</div></pre></td></tr></table></figure>
<p>åŸºæœ¬çš„WeexçŸ¥è¯†å°±æ˜¯è¿™äº›ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚ç…§<a href="https://weex.apache.org/cn/" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>å’Œdemo<a href="https://github.com/alibaba/weex" target="_blank" rel="external">é“¾æ¥</a>ã€‚<br>ä¸‹ç¯‡å¼€å§‹è®²è§£weexæºç ï¼Œæœªä½¿ç”¨è¿‡weexçš„å»ºè®®å…ˆå°è¯•ä½¿ç”¨weexã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡ä¸»è¦è®²è§£ä¸€ä¸‹Weexçš„å¤§æ¦‚åŸç†ä»¥åŠç®€å•çš„ä½¿ç”¨&lt;/p&gt;
    
    </summary>
    
      <category term="Weex" scheme="http://yoursite.com/categories/Weex/"/>
    
    
  </entry>
  
</feed>
